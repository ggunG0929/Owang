<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org/DTD Mapper3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="aaa.service.SoloApplicantMapper">

	<!-- 지원서 접수 -->
	<insert id="appinsert" parameterType="aDTO">
	    INSERT INTO applicant 
		(recruit_id, recruit_title, sid, sname, rsid, apphoto, aptitle, apcareer, apcompany, apworkstart, apworkend, apwork, 
		apacademic, apacademicstat, apintroduce, aplicense, aplicenseorg, aplicenseyear, aplanguage, aplanguagelevel, 
		apsubmitdate, cname, cid)
		values 
		(
		#{rcDTO.recruitId},
		#{rcDTO.recruitTitle},
		#{sDTO.sid}, 
		#{sDTO.sname},
		#{srDTO.rsid},
		#{srDTO.rsphoto}, #{srDTO.rstitle}, #{srDTO.rscareer}, #{srDTO.rscompany}, #{srDTO.rsworkstart}, #{srDTO.rsworkend}, #{srDTO.rswork},
		#{srDTO.rsacademic}, #{srDTO.rsacademicstat}, #{srDTO.rsintroduce}, #{srDTO.rslicense}, #{srDTO.rslicenseorg}, #{srDTO.rslicenseyear}, 
		#{srDTO.rslanguage}, #{srDTO.rslanguagelevel},
		sysdate(), 
		#{mcDTO.cname},
		#{mcDTO.cid});
		
		<selectKey keyProperty="ano" resultType="Integer" order="AFTER">
			select max(ano) from applicant
		</selectKey>
		
	</insert>
	


	<!-- 지원서 리스트 출력 -->
	<select id="applist" resultType="aDTO">
		SELECT 
		    ano, recruit_id, recruit_title, sid, sname, rsid, apphoto, aptitle, apcareer, apcompany, apworkstart, apworkend, apwork, 
		    apacademic, apacademicstat, apintroduce, aplicense, aplicenseorg, aplicenseyear, aplanguage, aplanguagelevel, 
		    apsubmitdate, cname, cid
		FROM applicant 
		WHERE sid = #{sid}
	</select>
	
	<!-- 지원서 개수 -->
	<select id="appcnt" resultType="Integer" >
		select count(*) from applicant
	</select>
	
	<!-- 지원서 상세보기 -->
	<select id="appdetail" resultType="aDTO">
		select * from applicant where ano = #{ano} and sid = #{sid}
	</select>
	
	<!-- 지원서 삭제 -->
	<delete id="appdelete"  parameterType="aDTO">
		delete from applicant where ano = #{ano}
	</delete>
	
	<select id="apptotal" resultType="Integer">
		select count(*) from applicant
	</select>
</mapper>