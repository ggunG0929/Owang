<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>company/detail</title>
</head>

<body>
	<header>
		<div th:insert="~{header :: header}"></div>
	</header>
	<container>

		<h3>기업정보</h3>
		<!-- 개인일때는 수정삭제가능ㄴ -->
		<th:block th:if="${session.adminSession != null or session.cid == dto.cid}"><!--관리자거나, 동일회사거나--> 
			<table border="">

				<tr>
					<td>기업이름</td>
					<td th:text="${dto.cname}" />
				</tr>
				<tr>
					<td>대표자</td>
					<td th:text="${dto.cceo}" />
				</tr>
				<tr>
					<td>개업연월일</td>
					<td th:text="${dto.cbuild}" />
				</tr>
				<tr>
					<td>업종</td>
					<td th:text="${dto.ccategory}" />
				</tr>
				<tr>
					<td>직원수</td>
					<td th:text="${dto.cstaff}" />
				</tr>
				<tr>
					<td>한해 매출액</td>
					<td th:text="|${dto.csales}(단위:백만원)|" />
				</tr>
				<tr>
					<td>이메일</td>
					<td th:text="${dto.cemail}" />
				</tr>
				<tr>
					<td>본점소재지</td>
					<td th:text="${dto.caddress}" />
				</tr>
				<tr>
					<td>전화번호</td>
					<td th:text="${dto.ccall}" />
				</tr>
				<tr th:if="${session.cid==dto.cid}">
					<td>회원유형</td>
					<td th:if="${dto.ctype == 2}" th:text="|유료회원 마감일:${#dates.format(dto.cdate, 'yyyy-MM-dd')}|"></td>
					<td th:unless="${dto.ctype == 2}" th:text="일반회원"></td>
				</tr>
				<tr>
					<td>기업인증여부</td>
					<td th:if="${dto.capproval}" th:text="기업인증완료"></td>
					<td th:unless="${dto.capproval}" th:text="기업미인증"></td>
				</tr>
				<tr>
					<td>회사소개</td>
					<td th:text="${dto.ccontent}" />
				</tr>
				<tr th:if="${session.cid == dto.cid}">
					<th>사업자증명서</th>
					<td><button onclick="openImageInNewWindow()">사업자등록증 확인</button></td>
				</tr>

			</table>

			<a href="/company/modify">수정</a>
			<a href="/company/delete">삭제</a>
		</th:block>
		<th:block th:unless="${session.adminSession != null or session.cid == dto.cid}"><!--관리자도 아니고, 동일회사도 아닌것이요--> 
			<table border="">
			<table border="">
				<tr>
					<td>기업이름</td>
					<td th:text="${dto.cname}" />
				</tr>
				<tr>
					<td>본점소재지</td>
					<td th:text="${dto.caddress}" />
				</tr>
				<tr>
					<td>개업연월일</td>
					<td th:text="${dto.cbuild}" />
				</tr>
				<tr>
					<td>업종</td>
					<td th:text="${dto.ccategory}" />
				</tr>
				<tr>
					<td>직원수</td>
					<td th:text="${dto.cstaff}" />
				</tr>
				<tr>
					<td>한해 매출액</td>
					<td th:text="|${dto.csales}(단위:백만원)|" />
				</tr>
				<tr>
					<td>회사소개</td>
					<td th:text="${dto.ccontent}" />
				</tr>
			</table>

		</th:block>
		<h3>기업리뷰</h3>

		<a th:href="|/review/lo/${dto.cid}/1|">리뷰보러가기</a>

		
		<a href="javascript:goBack()">이전 페이지</a>

		<aside><!-- 회사프로필 -->
			<div class="position_title_image">
				<a href="|/company/${dto.cid}|">
					<img src="https://cdn.jumpit.co.kr/sm/images/151241/20232701152751815_1001_1000.webp" alt="기업 로고">
				</a>
			</div>
			<h2>백엔드 개발자(Python, Django)</h2>
			<p><a href="|/company/${dto.cid}|"></p>
		</aside>
	</container><!-- 컨테이너 -->
	<script>
		function openImageInNewWindow() {
			// 이미지 URL 설정
			var image = "[[${dto.ccompanyFile}]]";

			// 새 창 열기
			var newWindow = window.open('', '_blank');

			// 이미지를 새 창에 표시
			newWindow.document.write('<img src="/companyup/' + image + '" alt="이미지" />');
		}
		function goBack() {
			window.history.back();
		}

	</script>
</body>

</html>