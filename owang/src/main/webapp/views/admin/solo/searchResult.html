<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>

<body>
	<th:block th:replace="~{admin/adheader}"/>
	
	<h2>전체회원관리</h2>
	
	<!-- 검색창 form -->
	<form action="/admin_solo/search" method="get" th:object="${soloDTO}">
		<select name="searchOption" th:value="*{searchOption}" >
		
			<option th:selected="*{searchOption == 'name'}" value="name">이름</option>
			
			<option th:selected="*{searchOption == 'id'}" selected="true" value="id">아이디</option>
		</select>
		<input type="text" th:field="*{keyword}"  placeholder="검색어 입력">
		<button type="submit">검색</button>
	</form>

	<!-- 검색 결과 -->
	<div th:if="${soloData == null or soloData.size() == 0}">
		<p>검색 결과가 없습니다.</p>
	</div>

	<!-- 검색 결과가 있을 때 테이블 표시 -->
	<div th:if="${soloData != null and soloData.size() > 0}">
		<table border="">
			<tr>
				<th>회원번호</td>
				<th>아이디</th>
				<th>이름</th>
				<th>회원유형</th>
				<th>재직인증</th>
				<th>재직회사</th>
				<th>삭제</th>

			</tr>
			<tr th:each="dto, dtostat : ${soloData}">
				<td th:text="${dto.sno}"></td>
				<td>
					<a th:text="${dto.sid}"></a>
				</td>
				<td>
					<a th:href="|/admin_solo/detail/${dto.sid}|" th:text="${dto.sname}"></a>
				</td>
					<td>
				<span th:if="${dto.stype == 2}">
					<span th:if="${dto.sdate == null}" >프리미엄회원(재직자리뷰) 평생이용</span>
					<span th:unless="${dto.sdate == null}" th:text="|프리미엄회원 마감일:${#dates.format(dto.sdate, 'yyyy-MM-dd')}|"></span>
				</span>
				<span  th:unless="${dto.stype == 2}" th:text="일반회원"></span>
			</td>
				<td th:if="${dto.sinjueng}" th:text="인증"></td>
				<td th:unless="${dto.sinjueng}" th:text="미인증"></td>
				<td th:if="${dto.sinjueng}" th:text="${dto.scompanyName}"></td>
				<td th:unless="${dto.sinjueng}" th:text="x"></td>





				<td> <a th:href="@{|/admin_solo/delete/${dto.sid}|}"
						th:onclick="return confirm('[[${dto.sname}]]회원님을 삭제하시겠습니까?')" th:text="회원삭제"></a>
				</td>
			</tr>



		<tr>
				<td colspan="9" align="center">
					<!-- 현재값에서 현재값 빼주고 더하기 1한거 -->
					<a th:if="${soloDTO.pageStart > 1}" 
					th:href="@{/admin_solo/search(keyword=${param.keyword},searchOption=${param.searchOption},page=1)}"
					 th:text="'[이전페이지]'" />

					<a th:if="${soloDTO.pageStart < soloDTO.page}"
						th:href="@{/admin_solo/search(keyword=${param.keyword},searchOption=${param.searchOption},page=${soloDTO.page -1})}"
					 th:text="'[이전]'" />
					
					
					<th:block th:each="no: ${#numbers.sequence(soloDTO.pageStart, soloDTO.pageEnd)}">
						<span th:if="${no==soloDTO.page}" th:text="${no}" />
						<a th:unless="${no==soloDTO.page}" 
						th:href="@{/admin_solo/search(keyword=${param.keyword},searchOption=${param.searchOption},page=${no})}"
						 th:text="${no}" />
					</th:block>
					<a th:if="${soloDTO.page < soloDTO.pageEnd}"
					 th:href="@{/admin_solo/search(keyword=${param.keyword},searchOption=${param.searchOption},page=${soloDTO.page + 1})}"
						th:text="'[다음]'" />
					<a th:if="${soloDTO.pageEnd < soloDTO.pageTotal}" 
					 th:href="@{/admin_solo/search(keyword=${param.keyword},searchOption=${param.searchOption},page=${soloDTO.pageTotal})}"
					 th:text="'[다음페이지]'" />
				</td>
			</tr>
			<tr align="center">
				<td colspan="2"><a href="/admin_solo/smanagement">목록으로</a></td>
				<td colspan="2"><a href="/admin_solo/sololist/1">전체보기</a></td>
			</tr>
		</table>
	</div>




</body>

</html>