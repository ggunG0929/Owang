<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>상품 매출 내역</title>
</head>
<body>
   <h1>상품 매출 내역</h1>
   <form action="/admin_product/payment/1" method="post">
		<label for="status">결제상태</label>
        <select name="status" id="status">
            <option value="paid" th:selected="${status == 'paid'}">완료</option>
            <option value="all" th:selected="${status == 'all'}">모두</option>
            <option value="ready" th:selected="${status == 'ready'}">대기</option>
            <option value="cancelled" th:selected="${status == 'cancelled'}">취소</option>
            <option value="failed" th:selected="${status == 'failed'}">실패</option>
        </select>
        <label for="limit">1페이지당 자료수</label>
        <select name="limit" id="limit">
            <option value="15" th:selected="${limit == 15}">15</option>
            <option value="30" th:selected="${limit == 30}">30</option>
            <option value="50" th:selected="${limit == 50}">50</option>
            <option value="100" th:selected="${limit == 100}">100</option>
        </select>
        <label for="from">시작일</label>
        <input type="date" name="from" id="from">
        <label for="to">종료일</label>
        <input type="date" name="to" id="to">
        <label for="sorting">정렬</label>
        <select name="sorting" id="sorting">
            <option value="-updated" th:selected="${sorting == '-updated'}">-최종수정시각</option>
            <option value="updated" th:selected="${sorting == 'updated'}">+최종수정시각</option>
            <option value="-started" th:selected="${sorting == '-started'}">-결제시작시각</option>
            <option value="started" th:selected="${sorting == 'started'}">+결제시작시각</option>
            <option value="-paid" th:selected="${sorting == '-paid'}">-결제완료시각</option>
            <option value="paid" th:selected="${sorting == '-paid'}">+결제완료시각</option>
        </select>
        <button type="submit">검색</button>
    </form>
    <table border="">
        <thead>
            <tr>
                <th>거래번호</th>
                <th>주문번호</th>
                <th>상품명</th>
				<th>회원아이디</th>
				<th>회원이름</th>
                <th>상품금액</th>
                <th>결제수단</th>
                <th>결제일</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="payment : ${paymentData}">
                <td th:text="${payment.imp_uid}"></td>
                <td th:text="${payment.merchant_uid}"></td>
                <td th:text="${payment.name}"></td>
                <td>
			        <a th:href="|/admin_product/payment/member/${payment.id}|" th:text="${payment.id}"></a>
			    </td>
                <td th:text="${payment.buyer_name}"></td>
                <td th:text="${payment.amount}"></td>
                <td th:text="${payment.pay_method}"></td>
                <td th:text="${payment.paid_at}"></td>
                <td><a th:href="${payment.receipt_url}" target="_blank">매출전표</a></td>
            </tr>
            <tr>
				<td colspan="8" align="center">					
		    		<!-- 이전 페이지로 이동 -->
				    <a th:if="${page-1 > 0}" th:href="|/admin_product/payment/${page-1}|">이전</a>
					<!-- 페이지 번호 표시 -->
					<th:each begin="1" end="${totalPages}" step="1" var="i">
						<th:block th:each="no: ${#numbers.sequence(1, totalPages)}" >
							<span th:if="${no==page}" th:text="${no}"/>
							<a th:unless="${no==page}" th:href="|/admin_product/payment/${no}|" th:text="${no}"/>
						</th:block>
					</th:each>
					<!-- 다음 페이지로 이동 -->
				    <a th:if="${totalPages >= page+1}" th:href="|/admin_product/payment/${page+1}|">다음</a>
				</td>
			</tr>
        </tbody>
    </table>
</body>
</html>