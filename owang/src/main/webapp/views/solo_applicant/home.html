<!DOCTYPE html>
<html xmlns="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
	[[${applicantDTO}]]
<h2>지원서 관리</h2>
	<span th:if="${#lists.isEmpty(appdata)}">
    	<h2>지원내역이 존재하지 않습니다</h2>
	</span>
	<p th:if="${appdata.isEmpty()}">
        <h3><a href="/recruit/list/1">채용공고 보러가기</a></h3>
    </p>    
<span th:if="${not appdata.isEmpty()}" th:text="${'총 ' + appdata.size() + ' 건의 지원 내역이 있습니다.'}"></span>
<table border="">
	<tr th:if="${not appdata.isEmpty()}">
	    <td>.no</td>
	    <td>지원일</td>
	    <td>지원자명</td>
	    <td>기업명</td>
	    <td>공고제목</td>
	    <td>지원이력서</td>
	    <td>지원상태</td>
    	<td>합격여부</td>
	</tr>
    <!-- appdata가 값이 있는 경우 데이터 출력 -->
    <tr th:each="adto, astart : ${appdata}">
        <td th:text="${astart.count + applicantDTO.start}"/>
        <td th:text="${adto.apsubmitdate}" />
        <td th:text="${adto.sname}" />
        <!-- 기업 명 -->
		<td>
			<a th:href="'/company/detail/' + ${adto.cid}" th:text="${adto.cname}"></a>
		</td>
		<!-- 공고 제목 -->
        <td>
			<a th:href="'/recruit/detail/' + ${adto.cid} + '/' + ${applicantDTO.page} + '/' + ${adto.recruitId}" th:text="${adto.recruitTitle}"></a>
		</td>
		<!-- 지원 이력서 -->
        <td>
			<a th:href="|/solo_applicant/detail/${applicantDTO.page}/${adto.ano}|" th:text="${adto.aptitle}" /> 
		</td>
		<input type="hidden" th:value="${adto.ano}" name="ano"/>
		[[${adto.apcancel}]]</br>
				[[${adto.appass}]]
		<!-- 지원 취소 -->
		<td th:if="${adto.apcancel == 0}">
		    <a th:href="|/solo_applicant/modify/${applicantDTO.page}/${adto.ano}|" th:onclick="return confirm('[[${adto.cname}]]에 지원을 취소하겠습니까?')">지원취소</a>
		</td>
		<td th:if="${adto.apcancel == 1}" th:colspan="3">취소된 지원서 입니다</td>   
		<!-- 합격여부 -->
		<td th:if="${adto.apcancel != 1}">
		    <span th:if="${adto.apread == 0}">미열람</span>
		    <span th:if="${adto.apread == 1 and adto.appass == 0}">열람완료</span>
		    <span th:if="${adto.apread == 1 and adto.appass == 1}">합격</span>
		    <span th:if="${adto.appass == 2}">불합격</span>
		</td>
    </tr>
    <!-- 페이징 처리 -->
	<tr>
	    <td colspan="9" align="center">
	        <a th:if="${applicantDTO.pageStart > 1}" th:href="${applicantDTO.pageStart - 1}" th:text="'[이전]'" />
	        <th:block th:each="ad: ${#numbers.sequence(applicantDTO.pageStart, applicantDTO.pageEnd)}">
	            <span th:if="${ad == applicantDTO.page}" th:text="${ad}" />
	            <a th:unless="${ad == applicantDTO.page}" th:href="${ad}" th:text="${ad}"></a>
	        </th:block>
	        <a th:if="${applicantDTO.pageEnd < applicantDTO.pageTotal}" th:href="${applicantDTO.pageEnd + 1}" th:text="'[다음]'" />
	    </td>
	</tr>

</table>
</body>
</html>
